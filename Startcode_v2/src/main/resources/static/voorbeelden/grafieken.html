<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grafieken</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
  <script src="../script.js"></script>
  <style>
    body {
      background-color: rgba(230, 241, 250, 0.72); /* Lichtblauwe achtergrond */
    }
    .btn-logout {
      background-color: #00677F; /* Blauwe uitlogknop */
      color: white;
    }
    .position-fixed {
      position: fixed;
      top: 100px;
      left: 100px;
    }
  </style>
</head>
<body onload="loadPatients()">

<!-- uitlogknop rechtsboven -->
<div class="mt-4">
  <a href="/index.html" class="btn btn-logout position-absolute top-0 end-0 m-4 w-10">Uitloggen</a>
</div>
<!-- Genus Logo linksboven -->
<img src="../LogoGenus.png" alt="Genus Logo" style="position: absolute; top: 30px; left: 100px; width: 200px; height: auto;">

<nav aria-label="breadcrumb" class="position-fixed">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="/home.html">Home</a></li>
    <li class="breadcrumb-item active" aria-current="page">Grafieken</li>
  </ol>
</nav>

<div class="container">
  <div class="col-lg-8 mx-auto p-4 py-md-3">
    <header>
      <h1 class="text-start my-4">Grafieken</h1>
      <div class="mb-5">
        Krijg een beeld van trends over de tijd.
      </div>
    </header>

    <main>
      <div class="row">
        <div style="width: 50%; margin: auto;">
          <canvas id="Chart"></canvas>
        </div>

        <script>
          fetch("/gemAlertsDec", { method: "POST" })
                  .then(response => response.json())
                  .then(result => {
                    const count = result.data.alerts_per_device_november_2024_aggregate.aggregate.count;

                    const ctx = document.getElementById('Chart').getContext('2d');

                    new Chart(ctx, {
                      type: 'bar',
                      data: {
                        labels: ['Devices (10–30 alerts)'],
                        datasets: [{
                          label: 'Aantal devices',
                          data: [count],
                          backgroundColor: ['rgba(54, 162, 235, 0.5)'],
                          borderColor: ['rgba(54, 162, 235, 1)'],
                          borderWidth: 1
                        }]
                      },
                      options: {
                        responsive: true,
                        plugins: {
                          title: {
                            display: true,
                            text: 'Aantal devices met 10–30 alerts (november 2024)'
                          }
                        },
                        scales: {
                          y: {
                            beginAtZero: true,
                            stepSize: 5
                          }
                        }
                      }
                    });
                  });
        </script>

        <div style="width: 50%; margin: auto;">
          <canvas id="myChart"></canvas>
        </div>
        <script>
          // JavaScript code om de grafiek weer te geven komt hier
          var ctx = document.getElementById('myChart').getContext('2d');

          // Definieer de data en opties voor de grafiek
          var myChart = new Chart(ctx, {
            type: 'bar', // Voorset het type grafiek, bijv. 'bar', 'line', 'pie', etc.
            data: {
              labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
              datasets: [{
                label: '# of Votes',
                data: [12, 19, 3, 5, 2, 3],
                backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
                  'rgba(54, 162, 235, 0.2)',
                  'rgba(255, 206, 86, 0.2)',
                  'rgba(75, 192, 192, 0.2)',
                  'rgba(153, 102, 255, 0.2)',
                  'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                  'rgba(255, 99, 132, 1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(255, 206, 86, 1)',
                  'rgba(75, 192, 192, 1)',
                  'rgba(153, 102, 255, 1)',
                  'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
              }]
            },
            options: {
              scales: {
                y: {
                  beginAtZero: true
                }
              }
            }
          });
        </script>

      </div>

      <div class="row">
        <div class="col-md-6">
          <figure class="figure">
            <img src="/SS%20figuur%20default.png" class="figure-img img-fluid rounded" alt="...">
            <figcaption class="figure-caption">A caption for the above image.</figcaption>
          </figure>
        </div>

        <div class="col-md-6">
          <figure class="figure">
            <img src="/SS%20figuur%20default.png" class="figure-img img-fluid rounded" alt="...">
            <figcaption class="figure-caption">A caption for the above image.</figcaption>
          </figure>
        </div>
      </div>


    <!--  <button onclick="location.href = './patient_add.html'">Voeg patient toe</button>
      <button onclick="location.href = './patient_edit.html'">Wijzig/verwijder patiënt</button> -->
    </main>
  </div>
</div>

</body>
</html>